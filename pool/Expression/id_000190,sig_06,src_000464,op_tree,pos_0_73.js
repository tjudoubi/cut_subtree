function(){varinner=newInner();vardone=false;inner.isDone=(index)while(true){varval=inner.doStuff();if(done)break;}}